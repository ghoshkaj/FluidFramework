# This Yaml Document has been converted by ESAI Yaml Pipeline Conversion Tool.
# Please make sure to check all the converted content, it is your team's responsibility to make sure that the pipeline is still valid and functions as expected.
parameters:
- name: taskTestStep
  type: string
- name: buildDirectory
  type: string
steps:
- ${{ if and(eq(variables['testCoverage'], true), startsWith(parameters.taskTestStep, 'ci:test')) }}:
  - task: Npm@1
    displayName: npm run ${{ parameters.taskTestStep }}:coverage
    inputs:
      command: 'custom'
      workingDir: ${{ parameters.buildDirectory }}
      customCommand: 'run ${{ taskTestStep }}:coverage'
    condition: and(succeededOrFailed(), eq(variables['startTest'], 'true'))
    env:
      ${{ if contains(parameters.taskTestStep, 'tinylicious') }}:
        logger__colorize: "false"
        logger__morganFormat: tiny
- ${{ else }}:
  - task: Npm@1
    displayName: npm run ${{ parameters.taskTestStep }}
    inputs:
      command: 'custom'
      workingDir: ${{ parameters.buildDirectory }}
      customCommand: 'run ${{ parameters.taskTestStep }}'
    condition: and(succeededOrFailed(), eq(variables['startTest'], 'true'))
    env:
      ${{ if contains(parameters.taskTestStep, 'tinylicious') }}:
        logger__colorize: "false"
        logger__morganFormat: tiny